plugins {
  id "org.pkl-lang" version "0.28.2"
}

pkl {
  project {
    packagers {
      register("makePackages") {
        def maybeVersion = System.getenv("VERSION")
        if (maybeVersion != null) {
          environmentVariables.put("VERSION", maybeVersion)
        }
        projectDirectories.from(file("src/"))
      }
    }
  }
  // ./gradlew pkldoc
  /*
  pkldocGenerators {
      register("pkldoc") {
          sourceModules.addAll(files("src/doc-package-info.pkl", "src/project.pkl"))
      }
  }
  */
}
